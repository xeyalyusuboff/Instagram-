<?php

// Telegram Bot API anahtarÄ±nÄ±zÄ± buraya girin
if($_GET["token"]){
    $apiToken=$_GET["token"];
}else{
$apiToken = '6373881974:AAEBi92ji-TyAkg-rRsIIb2VFH9HrJu4DME';
}
// Botunuzun kullanÄ±cÄ± adÄ±nÄ± buraya girin
$botUsername = 'groupsoyus1_bot';

// Telegram API'sine istek yapmak iÃ§in bir iÅŸlev
function apiRequest($method, $parameters)
{
    $url = "https://api.telegram.org/bot" . $GLOBALS['apiToken'] . "/" . $method;
    $handle = curl_init($url);
    curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($handle, CURLOPT_CONNECTTIMEOUT, 5);
    curl_setopt($handle, CURLOPT_TIMEOUT, 60);
    curl_setopt($handle, CURLOPT_POSTFIELDS, $parameters);
    $response = curl_exec($handle);
    if ($response === false) {
        curl_close($handle);
        return false;
    } else {
        $response = json_decode($response, true);
        curl_close($handle);
        return $response;
    }
}

// KÃ¼fÃ¼r kelime listesi
$badWords = array('gijd','peyser','amcÄ±q',"qehbe","pesi","ananÄ±","neslini","seni doÄŸanÄ±","s2m","sikim","neslivi","qancÄ±ÄŸ","peysÉ™r","É™linÉ™ verim","cindir","qÉ™hbÉ™","anavÄ±","sÄ±kÄ±m","sikim","blÉ™t","blet","cÄ±ndÄ±r","qehi","qÉ™hi","qancÄ±q","qanciq","SIK","SÄ°KIm","seks","seksi","cndr","skm","qhbÉ™","quÅŸbala","anani","b.acni","bacini","var yoxu","ogras","ograÅŸ","oÄŸraÅŸ",'sÄ¯k','si-kim');

// Webhook Ã¼zerinden gelen isteÄŸi iÅŸleme
$update = json_decode(file_get_contents('php://input'), true);

// Gelen mesajÄ± al
$message = isset($update['message']) ? $update['message'] : null;

// MesajÄ±n metnini al
$text = isset($message['text']) ? $message['text'] : '';

// MesajÄ±n kimden geldiÄŸini al
$chatId = isset($message['chat']['id']) ? $message['chat']['id'] : '';

// MesajÄ± gÃ¶nderen kullanÄ±cÄ±nÄ±n ID'sini al
$senderId = isset($message['from']['id']) ? $message['from']['id'] : '';

$calldata=$update['callback_query']['data'];

// MesajÄ± gÃ¶nderen kullanÄ±cÄ±nÄ±n adÄ±nÄ± al
$senderName = isset($message['from']['first_name']) ? $message['from']['first_name'] : '';
if(strpos($text,"/bot ")!== false){
   //tokeni alÄ±p webhook baÄŸladÄ±n api ile
   $tok = substr($text, 5);
   file_get_contents("https://api.telegram.org/bot$tok/setwebhook?url=https://xezerchain.com/bot/index.php?token=$tok");
   apiRequest('sendMessage', array('chat_id' => $chatId, 'text' => "ğŸ”Œ QoÅŸuldu"));

    die;
}
// BaÅŸlangÄ±Ã§ komutunu kontrol et

if ($text == '/start') {
    $apiUrl = "https://api.telegram.org/bot$apiToken/getMe";

$responsee = file_get_contents($apiUrl);
$dataa = json_decode($responsee, true);

if ($dataa && isset($dataa['ok']) && $dataa['ok']) {
    $botUsername = $dataa['result']['username'];
    
} else {
    
}

    // HoÅŸ geldin mesajÄ±nÄ± gÃ¶nder
    $message = 'Salam ' . $senderName . ", MÉ™n Qurupdaki SÃ¶yÃ¼ÅŸlÉ™ri Avtomatik SilÉ™n Botam.\n\nğŸ“¢ Qurubuna ÆlavÉ™ Edib SilmÉ™ Yetkisi Ver BÉ™sdir.";

    // Create the inline keyboard with a link button to your channel
    $inlineKeyboard = array(
        'inline_keyboard' => array(
            array(
                array(
                    'text' => 'ğŸ“¢ Kanal', // Button text
                    'url' => 'https://t.me/pulsuzinterne2' // Channel URL
                ),
                array(
                    'text' => 'â˜ï¸ Sahib', // Button text
                    'url' => 'https://t.me/yusuboff_015' // Channel URL
                )
            ),
            array(
                array(
                    'text' => 'ğŸ“¦ Klonla', // Button text
                    'callback_data'=> 'klon' // Channel URL
                )
            ),
            array(
                array(
                    'text' => 'ğŸ“ Guruba ÆlavÉ™ Et', // Button text
                    'url' => "https://telegram.me/$botUsername?startgroup=true" // Channel URL
                )
            )
        )
    );

    // Convert the keyboard array to JSON format
    $replyMarkup = json_encode($inlineKeyboard);

    // Send the message with the link button
    apiRequest('sendMessage', array('chat_id' => $chatId, 'text' => $message, 'reply_markup' => $replyMarkup));
}
